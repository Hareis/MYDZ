@{
    Layout = null;
}
<!DOCTYPE html>
<html>
<head>
    <meta name="viewport" content="width=device-width" />
    <title>price</title>
    <link href="@Url.Content("~/css/main.css")" rel="stylesheet" type="text/css" />
    <link href="@Url.Content("~/css/control.css")" rel="stylesheet" type="text/css" />
    <link href="@Url.Content("~/Validation/style.css")" rel="stylesheet" type="text/css" />
    <script src="@Url.Content("~/js/jquery-1.11.1.min.js")" type="text/javascript"></script>
    <script src="@Url.Content("~/js/jquery-ui.min.js")" type="text/javascript"></script>
    <script src="@Url.Content("~/js/PopWindow.js")" type="text/javascript"></script>
    <script src="@Url.Content("~/js/Skin.js")" type="text/javascript"></script>
    <script src="@Url.Content("~/js/master.js")" type="text/javascript"></script>
    <link href="@Url.Content("~/css/select2.css")" rel="stylesheet" type="text/css" />
    <script src="@Url.Content("~/js/select2.min.js")" type="text/javascript"></script>
    <script src="@Url.Content("~/Validation/Validform_v5.3.2_min.js")" type="text/javascript"></script>
    <script src="@Url.Content("~/Validation/Validform.js")" type="text/javascript"></script>
    <style type="text/css">
        .input-text-price
        {
            width: 50px;
            vertical-align: middle;
        }
        .table_item .table_hd
        {
            float: left;
            width: 100px;
            font-size: 14px;
            padding-right: 10px;
            text-align: right;
        }
    </style>
</head>
<body>
    <div style="margin-top: 30px;">
        @using (Html.BeginForm("SetupdateGoods", "Merchandise", FormMethod.Post, new { id = "QueryCriteria" }))
        {
            <div class="table_item">
                <span class="table_hd"><span class="require"></span>
                    <label style="color: Red;">
                        *</label>修改公式:</span>
                <div class="table_bd">
                    <span>
                        <label>
                            当前价格</label><label>&nbsp;乘</label><input type="text" class="input-text-price" name="cheng"
                                errormsg="只能输入数字" value="100" datatype="n" /><label>%</label><label>&nbsp;加</label><input
                                    type="text" class="input-text-price" datatype="n" name="jia" value="0" errormsg="只能输入数字" /><label>元</label><label>&nbsp;减</label><input
                                        type="text" name="jian" datatype="n" class="input-text-price" value="0" errormsg="只能输入数字" /><label>元</label>
                        <div class="msg_info">
                            <span class="Validform_checktip"></span><i></i>
                        </div>
                    </span>
                    <input type="hidden" name="ListGoodsId" value="" />
                    <input type="hidden" name="repalcword" value="" />
                    <input type="hidden" name="Updatedtype" value="BatchPrice" />
                </div>
                <span class="table_msg"><i></i><span></span></span>
            </div>
            <div class="table_item">
                <span class="table_hd"><span class="require"></span>
                    <label style="color: Red;">
                        *</label>分角处理:</span>
                <div class="table_bd">
                    <label>
                        <input type="radio" name="repalcedword" checked="checked" value="0" />保留分角(默认)</label>
                    <label>
                        <input type="radio" name="repalcedword" value="1" />抹去分</label>
                    <label>
                        <input type="radio" name="repalcedword" value="2" />抹去分角</label>
                    <input type="hidden" name="ListGoodsId" />
                </div>
                <span class="table_msg"><i></i><span></span></span>
            </div>
            <div class="table_item">
                <span class="table_hd"><span class="require"></span>
                    <input type="submit" name="" value="提交" /></span>
                <div class="table_bd">
                </div>
                <span class="table_msg"><i></i><span></span></span>
            </div>
        }
    </div>
</body>
<script type="text/javascript">
    $(function () {
        $('.SelectcodingType').select2();
        Sendedinfo();
        //获取从别的页面发送过来的信息
        function Sendedinfo() {
            var productlist = null;
            var Msg = window.location.search.substr(1);
            Msg = decodeURI(Msg);
            var aryVars = Msg.split('&');
            var obj = new Object();
            for (var i = 0; i < aryVars.length; i++) {
                var aryPair = aryVars[i].split('=');
                obj[aryPair[0]] = aryPair[1];
            }
            for (var key in obj) {
                productlist = obj[key];
            }
            var GoodsId = productlist.split(',');
            $('input[name=ListGoodsId]').val(GoodsId);
        }

        function initpriceset() {
            var str = "cheng:" + $("input[name=cheng]").val() + ",jia:" + $("input[name=jia]").val() + ",jian:" + $("input[name=jian]").val();
            $('input[name=repalcword]').val(str)
        }
    });
    (function (window, $) {
        Skin.Controller.Init();
        Validform.Controller.Init({
            form: "#QueryCriteria",
            beforeSubmit: function () {
                PopWindow.Controller.Init({ type: "loading", opacity: 0 });
                initpriceset();
                if ($('.input[name=ListGoodsId]').val() === null) { return false; }
            }
        }).config({
            ajaxPost: true,
            callback: function (data) {
                PopWindow.Controller.Clear();
                if (data.ErrorMsg.join(",") != null && data.ErrorMsg.join(",") != "") {
                    PopWindow.Controller.Init({ type: "error", opacity: 0, width: 352, height: 198, title: data.ErrorMsg.join(",") });
                }
            }
        });
    })(window, jQuery);
</script>
</html>
